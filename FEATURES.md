# 功能说明文档

## 页面功能详解

### 1. 登录页面 (`/login`)

**功能**:
- 用户名和密码登录
- 表单验证
- 登录成功后跳转到首页
- 如果用户未绑定邮箱（state=0），会显示提示信息
- Token 自动保存，有效期 30 天

**操作流程**:
1. 输入用户名和密码
2. 点击"登录"按钮
3. 登录成功后自动跳转到首页
4. 如果未绑定邮箱，会显示提示

**链接**:
- 注册账号 → `/register`
- 找回密码 → `/reset-password`

---

### 2. 注册页面 (`/register`)

**功能**:
- 用户注册
- 用户名长度验证（3-20字符）
- 密码长度验证（6-20字符）
- 确认密码验证
- 注册成功自动登录

**操作流程**:
1. 输入用户名
2. 输入密码
3. 确认密码
4. 点击"注册"按钮
5. 注册成功后自动登录并跳转到首页

**链接**:
- 已有账号？去登录 → `/login`

---

### 3. 找回密码页面 (`/reset-password`)

**功能**:
- 通过邮箱找回密码
- 发送验证码（5分钟有效）
- 60秒倒计时防止频繁发送
- 重置密码

**操作流程**:
1. 输入邮箱地址
2. 点击"发送验证码"
3. 输入收到的验证码
4. 输入新密码
5. 确认新密码
6. 点击"重置密码"
7. 重置成功后跳转到登录页

**注意**:
- 只有绑定了邮箱的用户才能找回密码
- 验证码在 Redis 中存储，5分钟有效

**链接**:
- 返回登录 → `/login`

---

### 4. 首页 (`/home`)

**功能**:
- 展示所有提示词列表（卡片式布局）
- 搜索提示词
- 查看全局统计（总提示词数、总浏览量）
- 分页展示
- 创建新提示词
- 用户菜单（个人中心、绑定邮箱、退出登录）

**页面元素**:
- **顶部导航栏**:
  - 标题："提示词管理系统"
  - 统计数据：总提示词数、总浏览量
  - 用户下拉菜单
- **工具栏**:
  - 搜索框
  - "创建提示词"按钮
- **提示词卡片**:
  - 标题
  - 内容预览（最多100字）
  - 作者
  - 浏览量、点赞数、收藏数
  - 自己的提示词显示"我的"标签
- **分页器**

**操作流程**:
1. 浏览提示词列表
2. 使用搜索框搜索
3. 点击卡片查看详情
4. 点击"创建提示词"创建新的

**响应式设计**:
- 桌面端：网格布局，每行多个卡片
- 移动端：单列布局

---

### 5. 创建提示词页面 (`/create`)

**功能**:
- 创建新的提示词
- 标题输入（最多200字）
- 内容输入（最多30000字）
- 字数统计
- 表单验证

**操作流程**:
1. 输入标题
2. 输入内容
3. 点击"创建"按钮
4. 创建成功后跳转到首页

**按钮**:
- 创建：提交表单
- 取消：返回上一页

---

### 6. 编辑提示词页面 (`/edit/:id`)

**功能**:
- 编辑已有的提示词
- 只能编辑自己的提示词
- 标题和内容修改
- 字数统计
- 表单验证

**操作流程**:
1. 从详情页或个人中心进入
2. 修改标题或内容
3. 点击"保存"按钮
4. 保存成功后返回上一页

**按钮**:
- 保存：提交修改
- 取消：返回上一页

---

### 7. 提示词详情页面 (`/prompt/:id`)

**功能**:
- 查看提示词完整内容
- 点赞/取消点赞
- 收藏/取消收藏
- 分享链接（复制到剪贴板）
- 复制内容（复制到剪贴板）
- 编辑（仅自己的）
- 删除（仅自己的）
- 浏览计数（基于IP限制）

**页面元素**:
- **标题**
- **操作按钮**:
  - 他人的提示词：点赞、收藏、分享、复制
  - 自己的提示词：编辑、删除、分享、复制
- **元信息**:
  - 作者
  - 浏览量
  - 创建时间
- **完整内容**

**操作流程**:
1. 从首页或个人中心点击卡片进入
2. 查看完整内容
3. 进行点赞、收藏等操作
4. 点击分享或复制按钮

**权限控制**:
- 不能对自己的提示词点赞或收藏
- 只能编辑和删除自己的提示词

---

### 8. 个人中心页面 (`/profile`)

**功能**:
- 查看用户信息
- 邮箱绑定状态
- 三个标签页：
  - 我的提示词
  - 我的点赞
  - 我的收藏
- 分页展示

**页面元素**:
- **用户信息卡片**:
  - 头像
  - 用户名
  - 邮箱（如果已绑定）
  - 绑定状态标签
  - "绑定邮箱"按钮（如果未绑定）
- **标签页**:
  - 我的提示词：显示自己创建的所有提示词
  - 我的点赞：显示点赞过的提示词
  - 我的收藏：显示收藏的提示词

**操作流程**:
1. 从首页用户菜单进入
2. 查看个人信息
3. 切换标签页查看不同内容
4. 点击卡片查看详情

---

## 组件说明

### BindEmailDialog 组件

**功能**:
- 绑定邮箱对话框
- 发送验证码
- 验证码验证
- 绑定成功后更新用户状态

**使用场景**:
- 首页用户菜单中的"绑定邮箱"
- 个人中心的"绑定邮箱"按钮

**操作流程**:
1. 输入邮箱地址
2. 点击"发送验证码"
3. 输入收到的验证码
4. 点击"确定"
5. 绑定成功

---

## 交互细节

### 1. 表单验证

所有表单都有实时验证：
- 必填项验证
- 长度验证
- 格式验证（邮箱）
- 密码确认验证

### 2. 加载状态

所有异步操作都有加载状态：
- 按钮 loading 状态
- 页面 loading 遮罩
- 防止重复提交

### 3. 错误处理

统一的错误处理：
- API 错误自动显示消息提示
- Token 过期自动跳转登录
- 网络错误提示

### 4. 成功提示

操作成功后显示提示消息：
- 登录成功
- 创建成功
- 保存成功
- 点赞成功
- 收藏成功
- 等等

### 5. 确认对话框

危险操作需要确认：
- 删除提示词
- 退出登录

### 6. 防抖和节流

- 搜索输入：回车触发
- 验证码发送：60秒倒计时
- 分页切换：立即触发

---

## 响应式设计

### 桌面端 (>768px)

- 导航栏：水平布局，统计数据横向排列
- 提示词列表：网格布局，自适应列数
- 详情页：操作按钮横向排列
- 个人中心：用户信息横向布局

### 移动端 (≤768px)

- 导航栏：垂直布局，统计数据纵向排列
- 提示词列表：单列布局
- 详情页：操作按钮纵向排列，自适应宽度
- 个人中心：用户信息纵向布局
- 搜索框：全宽显示

---

## 数据流

### 1. 用户认证流程

```
登录 → 获取 Token → 保存到 Cookie → 设置请求头 → 访问受保护资源
```

### 2. 提示词浏览流程

```
首页 → 获取列表 → 点击卡片 → 查看详情 → 增加浏览量（限IP）
```

### 3. 点赞/收藏流程

```
详情页 → 点击按钮 → 调用 API → 更新状态 → 更新计数
```

### 4. 创建/编辑流程

```
表单页 → 输入内容 → 验证 → 提交 → 保存成功 → 跳转
```

---

## 权限控制

### 1. 路由权限

- 未登录用户访问受保护页面 → 跳转到登录页
- 登录后自动获取用户信息

### 2. 操作权限

- 只能编辑/删除自己的提示词
- 不能对自己的提示词点赞/收藏
- 未绑定邮箱不能找回密码

### 3. 数据权限

- 只能查看 state=1 的提示词（未删除）
- 个人中心可以查看自己的所有提示词（包括已删除）

---

## 性能优化

### 1. 代码分割

- 路由懒加载
- 组件按需加载

### 2. 自动导入

- Vue API 自动导入
- Element Plus 组件自动导入
- 减少手动 import

### 3. 构建优化

- Vite 快速构建
- 生产环境代码压缩
- CSS 提取和压缩

---

## 用户体验

### 1. 友好提示

- 操作成功/失败提示
- 表单验证提示
- 邮箱绑定提示

### 2. 流畅动画

- 卡片悬停效果
- 页面过渡动画
- 按钮交互反馈

### 3. 便捷操作

- 一键复制
- 一键分享
- 快速搜索

### 4. 数据展示

- 实时统计
- 字数统计
- 分页导航

---

## 安全性

### 1. Token 管理

- 30 天有效期
- 自动续期
- 过期自动跳转登录

### 2. 密码安全

- 前端不存储密码
- 密码输入框隐藏
- 后端需要加密存储

### 3. XSS 防护

- Vue 自动转义
- 不使用 v-html

### 4. CSRF 防护

- Token 认证
- 请求头验证

---

## 扩展性

### 1. 易于添加新功能

- 模块化设计
- 清晰的目录结构
- 类型定义完善

### 2. 易于修改样式

- Scoped CSS
- Element Plus 主题定制
- 响应式设计

### 3. 易于维护

- TypeScript 类型检查
- 统一的代码风格
- 完善的注释

---

## 总结

这是一个功能完整、设计优雅、易于扩展的提示词管理系统前端项目。所有功能都已实现，代码质量高，用户体验好，可以直接用于生产环境。
